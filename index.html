<!DOCTYPE html>
<html>
<head>
    <title>Word Definition Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            font-size: 1.2em; /* Default size for readability */
        }

        .choice-btn {
            display: block;
            width: 80%;
            padding: 15px;
            margin: 10px auto;
            font-size: 1.5em;
            border: 2px solid #000;
            cursor: pointer;
            background-color: white;
            transition: background-color 0.2s;
        }

        .correct {
            background-color: lightgreen !important;
            color: black !important;
            border: 2px solid darkgreen;
        }

        .incorrect {
            background-color: lightcoral !important;
            color: black !important;
            border: 2px solid darkred;
        }

        #nextBtn, #fullscreenBtn {
            font-size: 1.5em;
            padding: 15px;
            width: 80%;
            margin: 10px auto;
            display: inline-block;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            body {
                font-size: 1.4em;
            }

            .choice-btn {
                width: 90%;
                font-size: 1.6em;
                padding: 20px;
            }

            #nextBtn, #fullscreenBtn {
                font-size: 1.6em;
                padding: 20px;
            }

            #word {
                font-size: 2.5em;
            }
        }
    </style>
    <script>
        const words = {
            "Turbulent": { definition: "Chaotic or unstable", difficulty: "hard" },
            "Virtuous": { definition: "Morally upright or good", difficulty: "hard" },
            "Voracious": { definition: "Extremely hungry or eager", difficulty: "hard" },
            "Dictionary": { definition: "A book or digital resource that provides definitions, meanings, and pronunciations of words", difficulty: "easy" },
            "Kettle": { definition: "A container used for boiling water, often with a spout", difficulty: "easy" },
            "Afford": { definition: "To have enough money or resources to pay for something", difficulty: "easy" }
        };

        let usedWords = [];
        let selectedWord = "";
        let correctDefinition = "";
        let correctAnswers = 0;
        let totalAttempts = 0;
        let correctSelected = false;
        let gameMode = "hard";

        function setGameMode() {
            gameMode = document.getElementById("modeSwitch").checked ? "easy" : "hard";

            // Reset score when switching modes
            correctAnswers = 0;
            totalAttempts = 0;
            document.getElementById("score").innerText = `Score: ${correctAnswers} / ${totalAttempts}`;

            startGame();
        }

        function startGame() {
            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("result").innerText = "";
            correctSelected = false;

            const filteredWords = Object.keys(words).filter(word => words[word].difficulty === gameMode);

            if (usedWords.length === filteredWords.length) {
                usedWords = [];
            }

            do {
                selectedWord = filteredWords[Math.floor(Math.random() * filteredWords.length)];
            } while (usedWords.includes(selectedWord));

            usedWords.push(selectedWord);
            correctDefinition = words[selectedWord].definition;

            pronounceWord();

            let incorrectDefs = [];
            while (incorrectDefs.length < 2) {
                let randomWord = filteredWords[Math.floor(Math.random() * filteredWords.length)];
                let randomDef = words[randomWord].definition;
                if (randomWord !== selectedWord && !incorrectDefs.includes(randomDef)) {
                    incorrectDefs.push(randomDef);
                }
            }

            const choices = [correctDefinition, ...incorrectDefs];
            choices.sort(() => Math.random() - 0.5);

            document.getElementById("word").innerText = selectedWord;

            const buttons = document.querySelectorAll(".choice-btn");
            buttons.forEach((button, index) => {
                button.innerText = choices[index];
                button.setAttribute("data-correct", choices[index] === correctDefinition);
                button.classList.remove("correct", "incorrect");
                button.style.display = "block";
                button.onclick = checkAnswer;
            });
        }

        function checkAnswer(event) {
            const buttons = document.querySelectorAll(".choice-btn");

            buttons.forEach(button => {
                if (button.getAttribute("data-correct") === "true") {
                    button.classList.add("correct");
                } else if (button === event.target) {
                    button.classList.add("incorrect");
                }
            });

            if (event.target.getAttribute("data-correct") === "true") {
                correctSelected = true;
            }

            document.getElementById("nextBtn").style.display = "inline-block";
        }

        function nextWord() {
            if (correctSelected) {
                correctAnswers++;
            }
            totalAttempts++;
            document.getElementById("score").innerText = `Score: ${correctAnswers} / ${totalAttempts}`;
            startGame();
        }

        function pronounceWord() {
            let speech = new SpeechSynthesisUtterance(selectedWord);
            let voices = window.speechSynthesis.getVoices();
            let britishVoice = voices.find(voice => voice.lang === "en-GB");

            if (britishVoice) {
                speech.voice = britishVoice;
            }

            window.speechSynthesis.speak(speech);
        }

        function goFullscreen() {
            let fullscreenBtn = document.getElementById("fullscreenBtn");
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }

            // Hide fullscreen button when activated
            fullscreenBtn.style.display = "none";

            // Adjust font sizes in fullscreen
            document.getElementById("word").style.fontSize = "2.5em";
            document.getElementById("modeSwitchContainer").style.fontSize = "1.5em";
        }

        // Ensure fullscreen button reappears when exiting fullscreen
        document.addEventListener("fullscreenchange", () => {
            let fullscreenBtn = document.getElementById("fullscreenBtn");
            if (!document.fullscreenElement) {
                fullscreenBtn.style.display = "inline-block";
            }
        });

        window.speechSynthesis.onvoiceschanged = () => {
            pronounceWord();
        };
    </script>
</head>
<body onload="startGame()">
    <h1>Word Definition Game</h1>

    <div id="modeSwitchContainer">
        <label for="modeSwitch">Easy Mode:</label>
        <input type="checkbox" id="modeSwitch" onchange="setGameMode()">
    </div>

    <button id="fullscreenBtn" onclick="goFullscreen()">Go Fullscreen</button>

    <p>Select the correct definition for: <strong id="word"></strong></p>
    <br>
    <button class="choice-btn"></button>
    <button class="choice-btn"></button>
    <button class="choice-btn"></button>
    <p id="result"></p>
    <p id="score">Score: 0 / 0</p>
    <button id="nextBtn" onclick="nextWord()">Next Word</button>
</body>
</html>
